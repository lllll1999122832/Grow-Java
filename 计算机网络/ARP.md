# 网络层协议——ARP协议

![img](https://csdnimg.cn/release/blogv2/dist/pc/img/original.png)

[夜深人静码代码](https://blog.csdn.net/kxbdys)![img](https://csdnimg.cn/release/blogv2/dist/pc/img/newCurrentTime2.png)于 2022-01-26 17:19:06 发布



一、[ARP协议](https://so.csdn.net/so/search?q=ARP协议&spm=1001.2101.3001.7020)的作用

1、ARP协议在以太网中使用，用来将通信的目标地址解析为MAC地址，跨网段通信时解析出网关的MAC地址。

2、如果计算机Aping计算机B的地址,首先计算机A判断目标IP地址和是否自己在一个网段，若在一个网段，[数据链路层](https://so.csdn.net/so/search?q=数据链路层&spm=1001.2101.3001.7020)封装的目标MAC地址就是计算机C的MAC地址。

3、如果计算机Aping计算机C的地址,首先计算机A判断目标IP地址和是否自己在一个网段，若不在一个网段，数据链路层封装的目标MAC地址就是网关的MAC地址。

二、地址解析协议ARP要点

1、ARP请求分组:包含发送方硬件地址/发送方IP地址/目标方硬件地址(未知时填0) /目标方IP地址。

2、ARP请求发送的是广播地址(路由器不转发ARP请求)。

3、ARP响应分组:包含发送方硬件地址/发送方IP地址/目标方硬件地址/目标方IP地址。

4、ARP分组封装在物理网络的帧中传输。

三、地址解析协议ARP的工作过程

当主机A欲向本局域网上的某个主机B发送IP数据报时，就先在其ARP高速缓存中查看有无主机B的IP地址。

1.如有，就可查出其对应的硬件地址，再将此硬件地址写入MAC帧，然后通过局域网将该MAC帧发往此硬件地址。

2.如没有，ARP进程在本局域网上广播发送一个ARP请求分组。收到ARP响应分组后，将得到的IP地址到硬件地址的映射写入ARP高速缓存中。

四、总结

1、ARP用于解决同一个局域网上的主机或路由器的IP地址和硬件地址的映射问题。

2、如果所要找的主机和源主机不在同一个局域网上，那么就要通过ARP找到一个位于本局域网上的某个路由器的硬件地址，然后把分组发送给这个路由器，让这个路由器把分组转发给下一个网络，剩下的工作就由下一个网络来做。